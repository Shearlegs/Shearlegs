@page "/management/nodes/{NodeName}"
@using ByteSizeLib;
@using Shearlegs.Web.Dashboard.Pages.Managements.Nodes.Components

<MudBreadcrumbs Items="BreadcrumbItems" />

<NodeNavigationTabs NodeName="@NodeName" ActivePanelIndex="0" />

<Condition Evaluation="isCanceled">
    <Match>
        <MudAlert Severity="Severity.Info" Variant="Variant.Text" Class="mb-3">
            Node not found!
        </MudAlert>
    </Match>
</Condition>

<LoadingView IsLoaded="isLoaded" IsCanceled="isCanceled">
    <MudGrid>
        <MudItem lg="6" Style="width: 100%;">
            <MudCard>
                <MudCardHeader Class="mud-theme-primary">
                    <CardHeaderContent>
                        <MudText Typo="Typo.h6">
                            Information
                        </MudText>
                    </CardHeaderContent>
                </MudCardHeader>
                <MudDivider />
                <MudList Dense="true">
                    <MudListItem>
                        <MudText Typo="Typo.subtitle2">
                            Node Name
                        </MudText>
                        @Node.Name
                    </MudListItem>
                    <MudDivider />
                    <MudListItem>
                        <MudText Typo="Typo.subtitle2">
                            Node Description
                        </MudText>
                        @Node.Description
                    </MudListItem>
                    <MudDivider />
                    <MudListItem>
                        <MudText Typo="Typo.subtitle2">
                            Node FQDN
                        </MudText>
                        @Node.FQDN
                    </MudListItem>
                </MudList>
            </MudCard>
        </MudItem>
        <MudItem lg="6" Style="width: 100%;">
            <MudCard>
                <MudCardHeader Class="mud-theme-primary">
                    <CardHeaderContent>
                        <MudText Typo="Typo.h6">
                            Daemon Information
                        </MudText>
                    </CardHeaderContent>
                </MudCardHeader>
                <MudDivider />
                <Condition Evaluation="isOffline">
                    <Match>
                        <MudCardContent>
                            <MudText Typo="Typo.body1">
                                Node Daemon is offline
                            </MudText>
                            <MudText Typo="Typo.body2">
                                @daemonException.Message
                            </MudText>
                        </MudCardContent>
                    </Match>
                    <NotMatch>
                        <MudList Dense="true">
                            <Condition Evaluation="DaemonInfo != null">
                                <Match>
                                    <MudListItem>
                                        <MudText Typo="Typo.subtitle2">
                                            Node Version
                                        </MudText>
                                        v@(DaemonInfo.NodeVersion)
                                    </MudListItem>
                                    <MudDivider />
                                    <MudListItem>
                                        <MudText Typo="Typo.subtitle2">
                                            Shearlegs Runtime Version
                                        </MudText>
                                        v@(DaemonInfo.ShearlegsRuntimeVersion)
                                    </MudListItem>
                                    <MudDivider />
                                </Match>
                            </Condition>
                            <Condition Evaluation="DaemonStatistics != null">
                                <Match>
                                    <MudListItem>
                                        <MudText Typo="Typo.subtitle2">
                                            Cache Size
                                        </MudText>
                                        @ByteSize.FromBytes(DaemonStatistics.CacheSizeBytes).ToString()
                                    </MudListItem>
                                </Match>
                            </Condition>
                        </MudList>
                    </NotMatch>
                </Condition>
                
            </MudCard>
        </MudItem>
    </MudGrid>
    
</LoadingView>